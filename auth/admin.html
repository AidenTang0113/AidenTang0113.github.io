<div id="usersList"></div>

<script type="module">
    import { getAllUsers, updateUserAdminStatus } from '../script/admin.js'
    
    async function renderUsers() {
        const users = await getAllUsers()
        
        document.getElementById('usersList').innerHTML = users.map(user => `
            <div class="user-card">
                <h3>${user.username}</h3>
                <p>${user.email}</p>
                <label>
                    Admin: 
                    <input type="checkbox" ${user.is_admin ? 'checked' : ''} 
                           onchange="updateAdminStatus('${user.id}', this.checked)">
                </label>
            </div>
        `).join('')
    }
    
    window.updateAdminStatus = async (userId, isAdmin) => {
        await updateUserAdminStatus(userId, isAdmin)
        renderUsers()
    }
    
    renderUsers()
</script>